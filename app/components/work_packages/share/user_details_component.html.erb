<%=
  component_wrapper do
    flex_layout do |flex|
      flex.with_row do
        render(Primer::Beta::Link.new(font_weight: :semibold, href: principal_show_path)) { user.name }
      end

      flex.with_row do
        if manager_mode?
          if user_is_a_group?
            if project_group?
              render(Primer::Beta::Text.new(color: :subtle)) { I18n.t("work_package.sharing.user_details.project_group")}
            else
              render(Primer::Beta::Text.new(color: :subtle)) { I18n.t("work_package.sharing.user_details.not_project_group")}
            end
          else
            if user_in_non_active_status?
              if user.locked?
                concat(render(Primer::Beta::Octicon.new(icon: :lock, color: :muted, mr: 1)))
                concat(render(Primer::Beta::Text.new(color: :subtle)) { I18n.t("work_package.sharing.user_details.locked") })
              elsif user.invited?
                concat(render(Primer::Beta::Text.new(color: :subtle)) { I18n.t('work_package.sharing.user_details.invited') })
                if invite_resent?
                  concat(render(Primer::Beta::Text.new(color: :subtle)) { I18n.t("work_package.sharing.user_details.invite_resent") })
                else
                  concat(
                    form_with(url: resend_invite_path, method: :post) do
                      render(Primer::Beta::Button.new(type: :submit, px: 0, scheme: :invisible)) { I18n.t('work_package.sharing.user_details.resend_invite') }
                    end
                  )
                end
              end
            else
              if part_of_a_shared_group?
                concat(render(Primer::Beta::Text.new(color: :subtle)) { I18n.t("work_package.sharing.user_details.part_of_a_shared_group") })
              end

              if project_member?
                concat(render(Primer::Beta::Text.new(color: :subtle)) { I18n.t("work_package.sharing.user_details.project_member")})
                concat(render(Primer::Beta::Text.new(color: :subtle, font_weight: :semibold)) { project_role_name })
              else
                concat(render(Primer::Beta::Text.new(color: :subtle)) { I18n.t("work_package.sharing.user_details.not_project_member")})
              end
            end
          end
        else
          if user.invited?
            concat(render(Primer::Beta::Text.new(color: :subtle)) { I18n.t("work_package.sharing.user_details.invited")})
          end

          concat(render(Primer::Beta::Text.new(color: :subtle)) { I18n.t("work_package.sharing.user_details.role") })
          concat(render(Primer::Beta::Text.new(color: :subtle, font_weight: :semibold)) { authoritative_work_package_role_name })
        end
      end
    end
  end
%>
